{% extends 'UI/base.html' %}

{% block title %}QU·∫¢N L√ù KH√ÅCH H√ÄNG{% endblock %}

{% block content %}

    <h1>Trang Qu·∫£n l√Ω Kh√°ch h√†ng</h1>

    <h2>&#129333 Th√™m Kh√°ch h√†ng M·ªõi</h2>
    <form action="/add_customer" method="POST" class="card card-body bg-light mb-4">
        <div class="mb-3">
            <label for="customer_name" class="form-label">T√™n Kh√°ch h√†ng:</label><br>
            <input type="text" id="customer_name" name="customer_name" class="form-control" required>
        </div>
        <div class="mb-3">
            <label for="phone" class="form-label">S·ªë ƒëi·ªán tho·∫°i:</label><br>
            <input type="text" id="phone" name="phone" class="form-control">
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email:</label><br>
            <input type="email" id="email" name="email" class="form-control">
        </div>
        <div class="mb-3">
            <label for="address" class="form-label">ƒê·ªãa ch·ªâ:</label><br>
            <textarea id="address" name="address" rows="3" class="form-control"></textarea>
        </div>
		<div class="ms-3">
			<div class="bm-3"><h5>&#128203 TH√îNG TIN XU·∫§T H√ìA ƒê∆†N</h5></div>
			<div class="mb-3">
				<label for="company_name" class="form-label">T√™n C√¥ng Ty:</label><br>
				<input type="text" id="company_name" name="company_name" class="form-control">
			</div>
			<div class="mb-3">
				<label for="phone" class="form-label">M√£ s·ªë thu·∫ø:</label><br>
				<input type="text" id="tax_id" name="tax_id" class="form-control">
			</div>
			<div class="mb-3">
				<label for="billing_address" class="form-label">ƒê·ªãa ch·ªâ H√≥a ƒê∆°n:</label><br>
				<textarea id="billing_address" name="billing_address" rows="3" class="form-control"></textarea>
			</div>
		</div>
        
		<button type="submit" class="btn btn-primary">L∆∞u Kh√°ch h√†ng</button>
    </form>

    <h2>&#128195 Danh s√°ch Kh√°ch h√†ng</h2>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>T√™n Kh√°ch h√†ng</th>
                <th>S·ªë ƒëi·ªán tho·∫°i</th>
                <th>Email</th>
                <th>ƒê·ªãa ch·ªâ</th>
				<th>C√¥ng Ty</th>
				<th>MST</th>
				<th>ƒê·ªãa ch·ªâ CTY</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for customer in customers_list %}
            <tr class="{% if not customer.is_active %}table-secondary text-muted{% endif %}">
                <td>{{ customer.customer_id }}</td>
				<td class="fw-bold">
                    {{ customer.customer_name }}
                    {% if not customer.is_active %}(ƒê√£ kh√≥a){% endif %}
                </td>
                <td>{{ customer.phone }}</td>
                <td>{{ customer.email }}</td>
                <td>{{ customer.address }}</td>
				<td>{{ customer.company_name }}</td>
                <td>{{ customer.tax_id }}</td>
                <td>{{ customer.billing_address }}</td>
				<td>
                    {% if customer.is_active %}
                        <a href="/edit_customer/{{ customer.customer_id }}" class="btn btn-sm btn-warning">S·ª≠a</a>
                    {% endif %}

                    <form action="{{ url_for('toggle_customer', id=customer.customer_id) }}" method="POST" style="display:inline;">
                        {% if customer.is_active %}
                            <button type="submit" class="btn btn-sm btn-danger" 
                                    onclick="return confirm('Kh√≥a kh√°ch h√†ng n√†y? N√≥ s·∫Ω ·∫©n kh·ªèi c√°c trang kh√°c.');">
                                üîí Kh√≥a
                            </button>
                        {% else %}
                            <button type="submit" class="btn btn-sm btn-success">
                                üîì M·ªü l·∫°i
                            </button>
                        {% endif %}
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}