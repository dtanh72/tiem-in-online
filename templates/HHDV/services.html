{% extends 'UI/base.html' %}

{% block title %}QU·∫¢N L√ù D·ªäCH V·ª§{% endblock %}

{% block content %}
    <h1>Trang Qu·∫£n l√Ω D·ªãch v·ª•</h1>

    <h2>Th√™m D·ªãch v·ª• M·ªõi</h2>
    <form action="/add_service" method="POST" class="card card-body bg-light mb-4 row">
        <div class="mb-3">
            <label for="service_name" class="form-label">T√™n D·ªãch v·ª•:</label>
            <input type="text" id="service_name" name="service_name" class="form-control" required>
        </div>
        <div class="mb-3">
            <label for="base_price" class="form-label">ƒê∆°n gi√° (vnƒë):</label>
            <input type="number" id="base_price" name="base_price" value="0" class="form-control">
        </div>
        <div class="mb-3">
			<label class="form-label">ƒê∆°n V·ªã T√≠nh T·∫ßng 1 (C∆° s·ªü):</label>
			<input type="text" name="unit" class="form-control" required placeholder="VD: T·ªù">
		</div>
		<div class="mb-3">
			<label class="form-label">ƒê∆°n V·ªã T√≠nh T·∫ßng 2 (N·∫øu c√≥):</label>
			<input type="text" name="unit_level2" class="form-control" placeholder="VD: Cu·ªën/X·∫•p">
		</div>
		<div class="mb-3">
			<label class="form-label">ƒê∆°n V·ªã T√≠nh T·∫ßng 3 (N·∫øu c√≥):</label>
			<input type="text" name="unit_level3" class="form-control" placeholder="VD: B·ªô">
		</div>
        <div class="mb-3">
            <label for="description" class="form-label">M√¥ t·∫£:</label>
            <textarea id="description" name="description" rows="2" class="form-control"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">L∆∞u D·ªãch v·ª•</button>
    </form>

    <h2>Danh s√°ch D·ªãch v·ª• Hi·ªán c√≥</h2>
    <table class="table table-striped table-hover table-bordered">
        <thead class="table-dark">
            <tr>
                <th style="width: 5%;">ID</th>
                <th style="width: 25%;">T√™n D·ªãch v·ª•</th>
                <th style="width: 15%;">ƒê∆°n gi√°</th>
                <th style="width: 10%;">ƒêV T·∫ßng 1 (G·ªëc)</th>
                <th style="width: 10%;">ƒêV T·∫ßng 2 (x)</th>
                <th style="width: 10%;">ƒêV T·∫ßng 3 (x)</th>
                <th style="width: 15%;">M√¥ t·∫£</th>
                <th style="width: 10%;">H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody>
            {% for service in services_list %}
            <tr class="{% if not service.is_active %}table-secondary text-muted{% endif %}">
                <td>{{ service.service_id }}</td>
                <td class="fw-bold">
                    {{ service.service_name }}
                    {% if not service.is_active %}(ƒê√£ kh√≥a){% endif %}
                </td>
                <td class="text-end">{{ service.base_price|currency }}</td>
                
                <td class="text-center bg-light">{{ service.unit }}</td>
                <td class="text-center">
                    {% if service.unit_level2 %}
                        {{ service.unit_level2 }}
                    {% else %}
                        <span class="text-muted">-</span>
                    {% endif %}
                </td>
                <td class="text-center">
                    {% if service.unit_level3 %}
                        {{ service.unit_level3 }}
                    {% else %}
                        <span class="text-muted">-</span>
                    {% endif %}
                </td>
                
                <td>{{ service.description }}</td>
                <td>
                    {% if service.is_active %}
                        <a href="{{ url_for('edit_service_page', service_id=service.service_id) }}" class="btn btn-sm btn-warning">S·ª≠a</a>
                    {% endif %}

                    <form action="{{ url_for('toggle_service', id=service.service_id) }}" method="POST" style="display:inline;">
                        {% if service.is_active %}
                            <button type="submit" class="btn btn-sm btn-danger" 
                                    onclick="return confirm('Kh√≥a d·ªãch v·ª• n√†y? N√≥ s·∫Ω ·∫©n kh·ªèi trang t·∫°o ƒë∆°n.');">
                                üîí Kh√≥a
                            </button>
                        {% else %}
                            <button type="submit" class="btn btn-sm btn-success">
                                üîì M·ªü l·∫°i
                            </button>
                        {% endif %}
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}